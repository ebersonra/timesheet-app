<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Ponto</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/responsive.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚è∞</text></svg>">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <h1 class="logo">
                        <span class="logo-icon">‚è∞</span>
                        TimesheetPro
                    </h1>
                    <div class="header-actions">
                        <button id="exportBtn" class="btn btn-outline">
                            üì§ Exportar CSV
                        </button>
                        <button id="clearDataBtn" class="btn btn-danger">
                            üóëÔ∏è Limpar Dados
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Stats Cards -->
                <section class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-content">
                                <h3 id="totalRecords">0</h3>
                                <p>Total de Registros</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚è±Ô∏è</div>
                            <div class="stat-content">
                                <h3 id="totalHours">0:00</h3>
                                <p>Horas Trabalhadas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üöÄ</div>
                            <div class="stat-content">
                                <h3 id="totalExtra">0:00</h3>
                                <p>Horas Extras</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-content">
                                <h3 id="totalValue">R$ 0,00</h3>
                                <p>Valor HE Acumulado</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üè¢</div>
                            <div class="stat-content">
                                <h3 id="presentialDays">0/8</h3>
                                <p>Dias Presenciais</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-content">
                                <h3 id="presentialPercent">0%</h3>
                                <p>% Presencial (40% min)</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Form Section -->
                <section class="form-section">
                    <div class="card">
                        <div class="card-header">
                            <h2>Registrar Ponto</h2>
                            <div class="header-buttons">
                                <button id="quickFillBtn" class="btn btn-secondary">
                                    ‚ö° Preenchimento R√°pido
                                </button>
                                <button id="detectLocationBtn" class="btn btn-outline" title="Detectar localiza√ß√£o por rede">
                                    üåê Detectar Local
                                </button>
                            </div>
                        </div>
                        <form id="timesheetForm" class="timesheet-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="dataEntrada">Data Entrada</label>
                                    <input type="date" id="dataEntrada" required>
                                </div>
                                <div class="form-group">
                                    <label for="horaEntrada">Hora Entrada</label>
                                    <input type="time" id="horaEntrada" required>
                                </div>
                                <div class="form-group">
                                    <label for="dataSaida">Data Sa√≠da</label>
                                    <input type="date" id="dataSaida" required>
                                </div>
                                <div class="form-group">
                                    <label for="horaSaida">Hora Sa√≠da</label>
                                    <input type="time" id="horaSaida" required>
                                </div>
                                <div class="form-group">
                                    <label for="inicioAlmoco">In√≠cio Almo√ßo</label>
                                    <input type="time" id="inicioAlmoco">
                                </div>
                                <div class="form-group">
                                    <label for="fimAlmoco">Fim Almo√ßo</label>
                                    <input type="time" id="fimAlmoco">
                                </div>
                                <div class="form-group">
                                    <label for="horasNormais">Horas Normais</label>
                                    <input type="time" id="horasNormais" value="08:00">
                                </div>
                                <div class="form-group">
                                    <label for="valorHora">Valor/Hora (R$)</label>
                                    <input type="number" id="valorHora" step="0.01" min="0" placeholder="30.00">
                                </div>
                                <div class="form-group">
                                    <label for="observacao">Turno/Observa√ß√£o</label>
                                    <select id="observacao">
                                        <option value="">Selecione o turno</option>
                                        <option value="Hor√°rio Comercial">Hor√°rio Comercial</option>
                                        <option value="Extra Noturno">Extra Noturno</option>
                                        <option value="Plant√£o">Plant√£o</option>
                                        <option value="Home Office">Home Office</option>
                                        <option value="Sobreaviso">Sobreaviso</option>
                                        <option value="Feriado">Feriado</option>
                                        <option value="Final de Semana">Final de Semana</option>
                                        <option value="Emerg√™ncia">Emerg√™ncia</option>
                                    </select>
                                </div>
                                <div class="form-group form-group-full">
                                    <label for="status">SAP</label>
                                    <select type="text" id="status" required>
                                        <option value="">Selecione</option>
                                        <option value="pendente">Pendente</option>
                                        <option value="concluido">Conclu√≠do</option>
                                        <option value="presencial">Presencial</option>
                                    </select>
                                </div>
                                <div class="form-group form-group-full">
                                    <div class="clt-config">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="modoCLT">
                                            <span class="checkmark"></span>
                                            Aplicar Regras CLT
                                        </label>
                                        <small class="help-text">Ativa c√°lculos conforme legisla√ß√£o trabalhista (adicional noturno 20%, limite HE 2h/dia)</small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="calculateBtn" class="btn btn-secondary">
                                    üßÆ Calcular
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    üíæ Salvar Registro
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Results Section -->
                <section class="results-section" id="resultsSection" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <h2>Resultado do C√°lculo</h2>
                        </div>
                        <div class="results-grid">
                            <div class="result-item">
                                <label>Total Bruto:</label>
                                <span id="resultTotalBruto">-</span>
                            </div>
                            <div class="result-item">
                                <label>Tempo Almo√ßo:</label>
                                <span id="resultTempoAlmoco">-</span>
                            </div>
                            <div class="result-item">
                                <label>Total L√≠quido:</label>
                                <span id="resultTotalLiquido">-</span>
                            </div>
                            <div class="result-item">
                                <label>Horas Extras:</label>
                                <span id="resultHorasExtras">-</span>
                            </div>
                            <div class="result-item">
                                <label>Valor HE:</label>
                                <span id="resultValorHE">-</span>
                            </div>
                            <!-- Campos CLT -->
                            <div class="result-item clt-result" style="display: none;">
                                <label>Horas Noturnas:</label>
                                <span id="resultHorasNoturnas">-</span>
                            </div>
                            <div class="result-item clt-result" style="display: none;">
                                <label>Adicional Noturno (20%):</label>
                                <span id="resultAdicionalNoturno">-</span>
                            </div>
                            <div class="result-item clt-result" style="display: none;">
                                <label>Valor Total CLT:</label>
                                <span id="resultValorTotalCLT">-</span>
                            </div>
                            <div class="result-item clt-result" style="display: none;">
                                <label>Status CLT:</label>
                                <span id="resultStatusCLT">-</span>
                            </div>
                        </div>
                        <!-- Se√ß√£o de Avisos CLT -->
                        <div id="cltWarnings" class="clt-warnings" style="display: none;">
                            <h4>‚ö†Ô∏è Avisos CLT</h4>
                            <ul id="cltWarningsList"></ul>
                        </div>
                    </div>
                </section>

                <!-- Table Section -->
                <section class="table-section">
                    <div class="card">
                        <div class="card-header">
                            <h2>Registros Salvos</h2>
                            <div class="table-actions">
                                <input type="text" id="searchInput" placeholder="Buscar registros..." class="search-input">
                                <select id="filterSelect" class="filter-select">
                                    <option value="">Todos os turnos</option>
                                    <option value="Hor√°rio Comercial">Hor√°rio Comercial</option>
                                    <option value="Extra Noturno">Extra Noturno</option>
                                    <option value="Plant√£o">Plant√£o</option>
                                    <option value="Home Office">Home Office</option>
                                    <option value="Sobreaviso">Sobreaviso</option>
                                    <option value="Feriado">Feriado</option>
                                    <option value="Final de Semana">Final de Semana</option>
                                    <option value="Emerg√™ncia">Emerg√™ncia</option>
                                </select>
                                <select id="filterSelectStatus" class="filter-select">
                                    <option value="">Todos os status SAP</option>
                                    <option value="pendente">Pendente</option>
                                    <option value="concluido">Conclu√≠do</option>
                                    <option value="presencial">Presencial</option>
                                </select>
                                <select id="filterSelectUser" class="filter-select">
                                    <option value="">Todos os usu√°rios</option>
                                    <!-- Ser√° preenchido via JavaScript -->
                                </select>
                                <select id="filterSelectMonth" class="filter-select">
                                    <option value="">Todos os meses</option>
                                    <!-- Ser√° preenchido via JavaScript -->
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table id="timesheetTable" class="timesheet-table">
                                <thead>
                                    <tr>
                                        <th>Data Entrada</th>
                                        <th>Hora Entrada</th>
                                        <th>Data Sa√≠da</th>
                                        <th>Hora Sa√≠da</th>
                                        <th>Almo√ßo</th>
                                        <th>Total L√≠quido</th>
                                        <th>Horas Extras</th>
                                        <th>Valor HE</th>
                                        <th>Observa√ß√£o</th>
                                        <th>SAP</th>
                                        <th>Localiza√ß√£o</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dados ser√£o inseridos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Pagina√ß√£o -->
                        <div id="paginationContainer" class="pagination-container">
                            <div class="pagination-info">
                                <span id="paginationInfo">Mostrando 0 de 0 registros</span>
                            </div>
                            <div class="pagination-controls">
                                <button id="prevPageBtn" class="btn btn-secondary pagination-btn" disabled>
                                    ‚ü® Anterior
                                </button>
                                <div id="pageNumbers" class="page-numbers">
                                    <!-- N√∫meros das p√°ginas ser√£o inseridos via JavaScript -->
                                </div>
                                <button id="nextPageBtn" class="btn btn-secondary pagination-btn" disabled>
                                    Pr√≥xima ‚ü©
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>&copy; 2025 TimesheetPro - Sistema de Controle de Ponto</p>
            </div>
        </footer>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Confirma√ß√£o</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Tem certeza que deseja realizar esta a√ß√£o?</p>
            </div>
            <div class="modal-footer">
                <button id="modalCancel" class="btn btn-secondary">Cancelar</button>
                <button id="modalConfirm" class="btn btn-danger">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processando...</p>
    </div>

    <!-- Scripts -->
    <script src="/static/js/utils.js"></script>
    <script src="/static/js/user-manager.js"></script>
    <script src="/static/js/storage.js"></script>
    <script src="/static/js/calculator.js"></script>
    <script src="/static/js/calculator-clt.js"></script>
    <script src="/static/js/components.js"></script>
    <script src="/static/js/fix-dates.js"></script>
    <script src="/static/js/backup-reminder.js"></script>
    <script src="/static/js/app.js"></script>
    <script src="/static/js/test-functions.js"></script>
</body>
</html>
